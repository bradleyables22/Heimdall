<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Heimdall</title>

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css" />

    <script src="/_content/Heimdall.Web/heimdall.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
            integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
            crossorigin="anonymous"></script>

    <script>
        (function () {
            "use strict";

            function initToast(el) {
                if (!el || el.__toastInit)
                    return;
                el.__toastInit = true;

                if (!window.bootstrap || !window.bootstrap.Toast)
                    return;

                const t = window.bootstrap.Toast.getOrCreateInstance(el);
                el.addEventListener("hidden.bs.toast", () => el.remove(), { once: true });
                t.show(); 
            }

            function initAll() {
                const host = document.getElementById("heimdallToastHost");
                if (!host) return;
                host.querySelectorAll(".toast").forEach(initToast);
            }

            document.addEventListener("DOMContentLoaded", () => {
                initAll();

                const host = document.getElementById("heimdallToastHost");
                if (!host) return;

                new MutationObserver(muts => {
                    for (const m of muts) {
                        for (const n of m.addedNodes) {
                            if (n.nodeType !== 1)
                                continue;
                            if (n.matches?.(".toast")) initToast(n);
                            n.querySelectorAll?.(".toast").forEach(initToast);
                        }
                    }
                }).observe(host, { childList: true, subtree: true });
            });
        })();
    </script>

</head>

<body>
    <div id="heimdallToastHost"
         class="toast-container position-fixed top-0 end-0 p-3"
         style="z-index: 1080;"
         aria-live="polite"
         aria-atomic="true"
         heimdall-sse="toasts"
         heimdall-sse-target="#heimdallToastHost"
         heimdall-sse-swap="afterbegin">
    </div>

    {{MenuComponent}}

    <div class="container-fluid p-2">
        {{page}}
    </div>
</body>
</html>